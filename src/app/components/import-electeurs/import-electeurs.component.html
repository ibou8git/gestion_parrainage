<div class="import-container">
    <h2>Importation des Électeurs</h2>

    <!-- Formulaire d'importation -->
    <form (ngSubmit)="onSubmit()" #importForm="ngForm">
        <div class="form-group">
            <label for="file">Fichier CSV</label>
            <input type="file" id="file" (change)="onFileChange($event)" accept=".csv" required />
        </div>
        <div class="form-group">
            <label for="checksum">Checksum SHA-256</label>
            <input type="text" id="checksum" [(ngModel)]="checksum" name="checksum" required />
        </div>

        <div *ngIf="isChecksumInvalid" class="error">
            Le checksum ne correspond pas au fichier sélectionné.
        </div>

        <div *ngIf="isFileInvalid" class="error">
            Le fichier CSV est invalide ou mal formaté. Vérifiez le format et essayez à nouveau.
        </div>

        <button type="submit" [disabled]="!importForm.valid || isChecksumInvalid || isFileInvalid">Importer</button>
    </form>

    <!-- Affichage des erreurs d'importation -->
    <div *ngIf="importErrors.length > 0" class="errors-container">
        <h3>Erreurs détectées</h3>
        <table>
            <thead>
                <tr>
                    <th>Numéro CIN</th>
                    <th>Numéro Électeur</th>
                    <th>Problème</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let error of importErrors">
                    <td>{{ error.cin }}</td>
                    <td>{{ error.electeurId }}</td>
                    <td>{{ error.probleme }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Validation finale -->
    <div *ngIf="isFileValid" class="validation-container">
        <button (click)="validateImport()">Valider l'Importation</button>
    </div>

    <!-- Progression de l'importation -->
    <div *ngIf="isUploading" class="progress-container">
        <p>Importation en cours...</p>
        <div class="progress-bar">
            <div class="progress" [style.width]="uploadProgress + '%'"></div>
        </div>
    </div>
</div>